{"version":3,"sources":["components/Details.js","actions/SearchAction.js"],"names":["Details","this","props","details","match","params","id","searchReducer","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","data-test","url","_cdata","title","_text","authors","author","length","map","auth","kauth","key","name","average_rating","ratings_count","text_reviews_count","description","href","target","rel","image_url","src","alt","className","type","data-toggle","react_router_dom__WEBPACK_IMPORTED_MODULE_8__","to","Component","connect","state","dispatch","bindActionCreators","__webpack_require__","d","__webpack_exports__","searchBooks","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","xml_js__WEBPACK_IMPORTED_MODULE_1__","xml_js__WEBPACK_IMPORTED_MODULE_1___default","_constants_actionConstants__WEBPACK_IMPORTED_MODULE_2__","getState","DETAILS","payload","SEARCH_TERM","SEARCH_RESULT","total","searching","searchWord","encodeURIComponent","concat","KEY","console","log","axios","method","mode","then","response","data","resp","convert","xml2json","compact","spaces","resp2","JSON","parse","results","empty","GoodreadsResponse","search","work","message","book"],"mappings":"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","file":"static/js/3.af7e69b2.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport {Link} from 'react-router-dom'; \r\n//import PropTypes from 'prop-types';\r\nimport {details} from '../actions/SearchAction';\r\n\r\nclass Details extends Component {\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t//console.log(this.props.match.params.id);\r\n\t\t//console.log(this.props);\r\n\t\tthis.props.details(this.props.match.params.id);\r\n\t}\r\n\trender() {\r\n\t\tif (!this.props.searchReducer.details) {\r\n\t\t\treturn (<div data-test=\"component-details\">Loading...</div>);\t\r\n\t\t}\r\n\t\tlet url = this.props.searchReducer.details.url._cdata;\r\n\t\treturn (\r\n\t\t\t<div data-test=\"component-details\">\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.searchReducer.details && \r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.props.searchReducer.details.title._cdata && \r\n\t\t\t\t\t\t\t<div data-test=\"details-title\">{this.props.searchReducer.details.title._cdata}</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.props.searchReducer.details.title._text && \r\n\t\t\t\t\t\t\t<div data-test=\"details-title\">{this.props.searchReducer.details.title._text}</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<div data-test=\"details-author\">by&nbsp; \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.props.searchReducer.details.authors.author.length > 0 ?\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.props.searchReducer.details.authors.author.map((auth, kauth) => {\r\n\t\t\t\t\t\t\t\t\treturn <span key={kauth}>{auth.name._text}, </span>\t\t\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{this.props.searchReducer.details.authors.author.name._text}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.props.searchReducer.details.average_rating._text && \r\n\t\t\t\t\t\t\t<div data-test=\"details-average-rating\">{this.props.searchReducer.details.average_rating._text}</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\tRating details\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.props.searchReducer.details.ratings_count._cdata && \r\n\t\t\t\t\t\t\t<div data-test=\"details-ratings-count\">{this.props.searchReducer.details.ratings_count._cdata} Ratings</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.props.searchReducer.details.text_reviews_count._cdata && \r\n\t\t\t\t\t\t\t<div data-test=\"details-text-reviews-count\">{this.props.searchReducer.details.text_reviews_count._cdata}</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.props.searchReducer.details.description._cdata && \r\n\t\t\t\t\t\t\t<div data-test=\"details-description\">{this.props.searchReducer.details.description._cdata}</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\turl && \r\n\t\t\t\t\t\t\t<div data-test=\"details-url\"><a href={url} target=\"_blank\" rel=\"noopener noreferrer\">more</a></div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<a href={url} target=\"_blank\" rel=\"noopener noreferrer\">GET A COPY</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.props.searchReducer.details.image_url._text && \r\n\t\t\t\t\t\t\t<div data-test=\"details-image\"><img src={this.props.searchReducer.details.image_url._text} alt=\"\" className=\"img-responsive\" /></div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t<div className=\"dropdown\">\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-default dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">Want to Read\r\n\t\t\t\t\t\t\t\t<span className=\"caret\"></span></button>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\tRate this book\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\tPreview\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t{\r\n\t\t\t\t\t!this.props.searchReducer.details && \r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\tLoading the book details .....\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t<hr />\r\n\t\t\t\t<Link to=\"/\">Back to Search Results</Link>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tsearchReducer: state.searchReducer\r\n\t}\t\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn bindActionCreators({ details }, dispatch);\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Details);","import axios from 'axios';\r\nimport convert from 'xml-js';\r\nimport {SEARCH_RESULT, DETAILS, KEY, SEARCH_TERM} from '../constants/actionConstants';\r\n\r\nexport const searchBooks = (name) => (dispatch, getState) => {\r\n\t//console.log('-------------');\r\n\t//console.log('searchBooks start');\r\n\tdispatch({\r\n\t\ttype: DETAILS,\r\n\t\tpayload: null\r\n\t});\r\n\tdispatch({\r\n\t\ttype: SEARCH_TERM,\r\n\t\tpayload: name\r\n\t});\r\n\tdispatch({\r\n\t\ttype: SEARCH_RESULT,\r\n\t\tpayload: null,\r\n\t\ttotal: null,\r\n\t\tsearching: true\r\n\t});\r\n\t//console.log('name is ', name);\r\n\tlet searchWord = encodeURIComponent(name);\r\n\tlet url = `/search.xml?key=${KEY}&q=${searchWord}`;\r\n\tconsole.log('url is ', url);\r\n\t\r\n\treturn axios({\r\n\t\tmethod: 'get',\r\n\t\tmode: 'no-cors',\r\n\t\turl\r\n\t  }).then(response => {\r\n\t\t  \tconsole.log('response.data: ', response.data);\r\n\t\t\tconst resp = convert.xml2json(response.data, {compact: true, spaces: 4});\r\n\t\t\tconst resp2 = JSON.parse(resp);\r\n\t\t\tconsole.log('resp2: ', resp2);\r\n\t\t\tlet results = null;\r\n\t\t\tlet empty = null;\r\n\t\t\tif (resp2.GoodreadsResponse.search.results.work && !resp2.GoodreadsResponse.search.results.work.length) {\r\n\t\t\t\tresults = [resp2.GoodreadsResponse.search.results.work];\r\n\t\t\t} else if (resp2.GoodreadsResponse.search.results.work) {\r\n\t\t\t\tresults = resp2.GoodreadsResponse.search.results.work;\t\r\n\t\t\t} else {\r\n\t\t\t\tempty = 'No Result Found';\t\r\n\t\t\t}\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: SEARCH_RESULT,\r\n\t\t\t\tpayload: results,\r\n\t\t\t\ttotal: resp2.GoodreadsResponse.search['total-results']._text,\r\n\t\t\t\tsearching: false,\r\n\t\t\t\tmessage: empty\r\n\t\t\t});\r\n\t\t});\r\n\t\r\n\t//console.log('searchBooks end');\r\n};\r\n\r\n\r\n\r\nexport const details = (id) => (dispatch, getState) => {\r\n\t\r\n\t//console.log('-------------');\r\n\t//console.log('details start');\r\n\t//console.log('id is ', id);\r\n\tlet url = `/book/isbn/${id}?key=${KEY}`;\r\n\tconsole.log('url is ', url);\r\n\t\r\n\treturn axios({\r\n\t\tmethod: 'get',\r\n\t\tmode: 'no-cors',\r\n\t\turl\r\n\t  }).then(response => {\r\n\t\t\tconst resp = convert.xml2json(response.data, {compact: true, spaces: 4});\r\n\t\t\tconst resp2 = JSON.parse(resp);\r\n\t\t\tconsole.log('resp2: ', resp2.GoodreadsResponse.book);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: DETAILS,\r\n\t\t\t\tpayload: resp2.GoodreadsResponse.book\r\n\t\t\t});\r\n\t\t});\r\n\t\r\n\t//console.log('details end');\r\n};\r\n"],"sourceRoot":""}