{"version":3,"sources":["components/Search.js","actions/SearchAction.js"],"names":["Search","props","_this","Object","E_manish_Documents_web_github_px_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","E_manish_Documents_web_github_px_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","E_manish_Documents_web_github_px_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","bookName","e","preventDefault","console","log","searchBooks","_this2","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","data-test","onSubmit","searchBook","bind","className","htmlFor","type","id","value","onChange","setState","target","searchReducer","searching","search_term","search_result","search_total_result","map","key","url","concat","best_book","_text","title","react_router_dom__WEBPACK_IMPORTED_MODULE_8__","to","src","image_url","alt","author","name","Component","connect","dispatch","bindActionCreators","__webpack_require__","d","__webpack_exports__","details","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","xml_js__WEBPACK_IMPORTED_MODULE_1__","xml_js__WEBPACK_IMPORTED_MODULE_1___default","_constants_actionConstants__WEBPACK_IMPORTED_MODULE_2__","getState","DETAILS","payload","SEARCH_TERM","SEARCH_RESULT","total","searchWord","encodeURIComponent","API_URL","KEY","axios","method","mode","then","response","resp","convert","xml2json","data","compact","spaces","resp2","JSON","parse","results","empty","GoodreadsResponse","search","work","length","message","book"],"mappings":"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","file":"static/js/2.b247e975.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport {Link} from 'react-router-dom'; \r\n//import PropTypes from 'prop-types';\r\nimport {searchBooks} from '../actions/SearchAction';\r\n\r\nclass Search extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tbookName: ''\t\r\n\t\t};\r\n\t}\r\n\r\n\tsearchBook(e) {\r\n\t\te.preventDefault();\r\n\t\tconsole.log('state 2 are ', this.state);\r\n\t\tthis.props.searchBooks(this.state.bookName);\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div data-test=\"component-search\">\r\n\t\t\t\t<form onSubmit={this.searchBook.bind(this)} className=\"frm-search\" data-test=\"form-search\">\r\n\t\t\t\t\t<div className=\" search-items\">\r\n\t\t\t\t\t\t<label htmlFor=\"bookName\" className=\"item-label\">Book Name</label>\r\n\t\t\t\t\t\t<input type=\"text\" className=\" item-input\" id=\"bookName\" value={this.state.bookName} onChange={(e) => {this.setState({bookName: e.target.value});}} />\r\n\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary item-btn\">Submit</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.searchReducer.searching && \r\n\t\t\t\t\t<div data-test=\"searching\">\r\n\t\t\t\t\t\t<h3>Searching books for {this.props.searchReducer.search_term}....</h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.searchReducer.search_result && \r\n\t\t\t\t\t<div data-test=\"search-result\">\r\n\t\t\t\t\t\t<h3 data-test=\"search-result-total-books\">Total Books Found: {this.props.searchReducer.search_total_result}</h3>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.props.searchReducer.search_result.map((value, key) => {\r\n\t\t\t\t\t\t\t\t\tlet url = `/details/${value.best_book.id._text}`;\r\n\t\t\t\t\t\t\t\t\treturn <div className=\"col-md-3 item-result\" key={key} data-test=\"search-result-items\">\r\n\t\t\t\t\t\t\t\t\t\t\t<strong>{value.best_book.title._text}</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link to={url}><img src={value.best_book.image_url._text} className=\"img-responsive\" alt=\"\" /></Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\tID: # <Link to={url}>{value.best_book.id._text}</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\tBy: <strong>{value.best_book.author.name._text}</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tsearchReducer: state.searchReducer\r\n\t}\t\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn bindActionCreators({ searchBooks }, dispatch);\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Search);","import axios from 'axios';\r\nimport convert from 'xml-js';\r\nimport {SEARCH_RESULT, DETAILS, KEY, SEARCH_TERM, API_URL} from '../constants/actionConstants';\r\n\r\nexport const searchBooks = (name) => (dispatch, getState) => {\r\n\t//console.log('-------------');\r\n\t//console.log('searchBooks start');\r\n\tdispatch({\r\n\t\ttype: DETAILS,\r\n\t\tpayload: null\r\n\t});\r\n\tdispatch({\r\n\t\ttype: SEARCH_TERM,\r\n\t\tpayload: name\r\n\t});\r\n\tdispatch({\r\n\t\ttype: SEARCH_RESULT,\r\n\t\tpayload: null,\r\n\t\ttotal: null,\r\n\t\tsearching: true\r\n\t});\r\n\t//console.log('name is ', name);\r\n\tlet searchWord = encodeURIComponent(name);\r\n\tlet url = `${API_URL}search.xml?key=${KEY}&q=${searchWord}`;\r\n\tconsole.log('url is ', url);\r\n\t\r\n\treturn axios({\r\n\t\tmethod: 'get',\r\n\t\tmode: 'no-cors',\r\n\t\turl\r\n\t  }).then(response => {\r\n\t\t\tconst resp = convert.xml2json(response.data, {compact: true, spaces: 4});\r\n\t\t\tconst resp2 = JSON.parse(resp);\r\n\t\t\tconsole.log('resp2: ', resp2);\r\n\t\t\tlet results = null;\r\n\t\t\tlet empty = null;\r\n\t\t\tif (resp2.GoodreadsResponse.search.results.work && !resp2.GoodreadsResponse.search.results.work.length) {\r\n\t\t\t\tresults = [resp2.GoodreadsResponse.search.results.work];\r\n\t\t\t} else if (resp2.GoodreadsResponse.search.results.work) {\r\n\t\t\t\tresults = resp2.GoodreadsResponse.search.results.work;\t\r\n\t\t\t} else {\r\n\t\t\t\tempty = 'No Result Found';\t\r\n\t\t\t}\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: SEARCH_RESULT,\r\n\t\t\t\tpayload: results,\r\n\t\t\t\ttotal: resp2.GoodreadsResponse.search['total-results']._text,\r\n\t\t\t\tsearching: false,\r\n\t\t\t\tmessage: empty\r\n\t\t\t});\r\n\t\t});\r\n\t\r\n\t//console.log('searchBooks end');\r\n};\r\n\r\n\r\n\r\nexport const details = (id) => (dispatch, getState) => {\r\n\t\r\n\t//console.log('-------------');\r\n\t//console.log('details start');\r\n\t//console.log('id is ', id);\r\n\tlet url = `${API_URL}book/isbn/${id}?key=${KEY}`;\r\n\tconsole.log('url is ', url);\r\n\t\r\n\treturn axios({\r\n\t\tmethod: 'get',\r\n\t\tmode: 'no-cors',\r\n\t\turl\r\n\t  }).then(response => {\r\n\t\t\tconst resp = convert.xml2json(response.data, {compact: true, spaces: 4});\r\n\t\t\tconst resp2 = JSON.parse(resp);\r\n\t\t\tconsole.log('resp2: ', resp2.GoodreadsResponse.book);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: DETAILS,\r\n\t\t\t\tpayload: resp2.GoodreadsResponse.book\r\n\t\t\t});\r\n\t\t});\r\n\t\r\n\t//console.log('details end');\r\n};\r\n"],"sourceRoot":""}